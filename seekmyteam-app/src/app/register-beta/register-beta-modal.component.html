<style>
  #bg {
    /* background-image: url("assets/main.jpg"); */
    background: url(https://d24imx1z1vc7kd.cloudfront.net/static-images/register-background.jpeg);
    height: 100vh;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
  }
  
  .my-center {
    width: 100%;
    position: absolute;
    top: 15%;
    /* transform: translateY(-50%); */
    left: 50%;
    transform: translateX(-50%);
  }

  #invalidText {
    color: red;
    font-weight: bold;
    font-size: 14px;
    float: left;
    padding-top: 10px;
  }

  #validCode {
    color: red;
    font-weight: bold;
    font-size: 14px;
    float: left;
    padding-top: 10px;
  }

  #required {
    color: red;
    display: inline-block;
  }
  
  #nameField {
    display: inline-block;
    width: 50%;
    padding-right: 3%;
    margin-left: 0;
  }

  #emailField {
    display: inline-block;
    width: 50%;
    padding-right: 3%;
    position: fixed;
  }
  
  #passwordField {
    display: inline-block;
    width: 50%;
    padding-right: 3%;
    margin-left: 0;
  }

  #schoolField {
    display: inline-block;
    width: 50%;
    padding-right: 3%;
    position: fixed;
  }

  #majorField {
    display: inline-block;
    width: 50%;
    padding-right: 3%;
    margin-left: 0;
  }
  
  #minorField {
    display: inline-block;
    width: 50%;
    padding-right: 3%;
    position: fixed;
  }

  #skills {
    display: inline-block;
    padding-right: 10%;
    margin-left: 0;
  }

  #uploadPicture {
    display: inline-block;
    right: 3%;
    position: fixed;
  }

  html, body {
    overflow-y: auto;
    padding-right: 0 !important;
  
  }
  .modal-open {
    overflow: auto !important;
    padding-right: 0 !important;
  }

</style>

<a class="btn btn-primary" data-toggle="modal" data-target="#registerModal">Register</a>

<!-- Register Modal -->
<div #myModal class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModal" aria-hidden="true" data-backdrop="false">
    <div class="modal-dialog" role="document" >
      <form class="needs-validation" novalidate>
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="registerModal">Register</h5>
                <button type="button" (click)="clearRegisterFields()" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                <div id="test" class="form-group">
                    <span id="nameField" >
                        <label> Name
                            <input type="text" id="name" name="name" placeholder="Name" [formControl]="nameForm" [(ngModel)]="credentials.name" class="form-control" required>
                        </label>
                        <div id="required" *ngIf="submitted && nameForm.errors"  class="invalid-feedback">
                            Please enter a name
                        </div>
                    </span>
                    <span id="emailField">
                    <label> Email
                        <input type="text" name="email" placeholder="Email" [formControl]="emailForm" [(ngModel)]="credentials.email" class="form-control" required>
                    </label>
                    <div *ngIf="emailForm.errors">
                        <div id="required" *ngIf="submitted && emailForm.errors.required" class="invalid-feedback">
                        Please enter a Purdue email
                        </div>
                        <div id="required" *ngIf="submitted && emailForm.value !== '' && emailForm.errors.emailDomain !== null" class="invalid-feedback">
                        Must be a Purdue email
                        </div>
                    </div>          
                    </span>       
                </div>
                <div class="form-group">     
                    <span id="passwordField">
                    <label> Password
                        <input type="password" name="password" placeholder="Password" [formControl]="passwordForm" [(ngModel)]="credentials.password" class="form-control" required>
                    </label>
                    <div id="required" *ngIf="submitted && passwordForm.errors" class="invalid-feedback">
                        Please enter a password
                    </div>
                    </span>
                    <span id="schoolField">
                    <label> School
                        <input type="text" name="school" placeholder="School" list="mylist" [formControl]="schoolForm" [(ngModel)]="credentials.school" class="form-control" required>
                        <datalist id="mylist">
                            <option value='{{school}}' *ngFor="let school of SCHOOLS_ARRAY">{{school}}</option>
                        </datalist>
                      </label>
                    <div id="required" *ngIf="submitted && schoolForm.errors" class="invalid-feedback">
                        Please enter your school
                    </div>
                    </span> 
                </div>
                <div class="form-group">
                    <!-- <div  class="input-group mb-3">
                        <div class="input-group-prepend">
                        <label class="input-group-text" for="inputGroupSelect01">Major</label>
                        </div>
                        <select name="selectMajor" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" id="inputGroupSelect01" required>
                        <option value=''>Select your major</option>  
                        <option value='{{major}}' *ngFor="let major of MAJORS_ARRAY">{{major}}</option>
                        </select>
                        <div id="required" *ngIf="majorForm.touched && majorForm.errors" class="invalid-feedback">
                            Please enter your major
                        </div>
                    </div> -->
                    <span id="majorField">      
                      <label> Major
                          <ng-container *ngIf="credentials.school !== 'Agriculture' && credentials.school !== 'Education' && credentials.school !== 'Engineering' && credentials.school !== 'Exploratory Studies' && credentials.school !== 'Health and Human Sciences' && credentials.school !== 'Liberal Arts' && credentials.school !== 'Management' && credentials.school !== 'Pharmacy' && credentials.school !== 'Polytechnic Institute' && credentials.school !== 'Science' && credentials.school !== 'Veterinary Medicine'">
                              <input type="text" name="major" placeholder="Major" list="mylist0" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                              <datalist id="mylist0">
                                  <option value=''>--SELECT SCHOOL FIRST--</option>
                              </datalist>
                          </ng-container>
                        <ng-container *ngIf="credentials.school === 'Agriculture'">
                            <input type="text" name="major" placeholder="Major" list="mylist2" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist2">
                                <option value='{{major}}' *ngFor="let major of AGRICULTURE_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Education'">
                            <input type="text" name="major" placeholder="Major" list="mylist3" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist3">
                                <option value='{{major}}' *ngFor="let major of EDUCATION_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Engineering'">
                            <input type="text" name="major" placeholder="Major" list="mylist4" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist4">
                                <option value='{{major}}' *ngFor="let major of ENGINEERING_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Exploratory Studies'">
                            <input type="text" name="major" placeholder="Major" list="mylist5" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist5">
                                <option value='{{major}}' *ngFor="let major of EXPLORATORY_STUDIES_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Health and Human Sciences'">
                            <input type="text" name="major" placeholder="Major" list="mylist6" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist6">
                                <option value='{{major}}' *ngFor="let major of HEALTH_AND_HUMAN_SCIENCES_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Liberal Arts'">
                            <input type="text" name="major" placeholder="Major" list="mylist7" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist7">
                                <option value='{{major}}' *ngFor="let major of LIBERAL_ARTS_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Management'">
                            <input type="text" name="major" placeholder="Major" list="mylist8" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist8">
                                <option value='{{major}}' *ngFor="let major of MANAGEMENT_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Pharmacy'">
                            <input type="text" name="major" placeholder="Major" list="mylist9" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist9">
                                <option value='{{major}}' *ngFor="let major of PHARMACY_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Polytechnic Institute'">
                            <input type="text" name="major" placeholder="Major" list="mylist10" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist10">
                                <option value='{{major}}' *ngFor="let major of POLYTECHNIC_INSTITUTE_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Science'">
                            <input type="text" name="major" placeholder="Major" list="mylist11" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist11">
                                <option value='{{major}}' *ngFor="let major of SCIENCE_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                        <ng-container *ngIf="credentials.school === 'Veterinary Medicine'">
                            <input type="text" name="major" placeholder="Major" list="mylist12" [formControl]="majorForm" [(ngModel)]="credentials.major" class="form-control" required>
                            <datalist id="mylist12">
                                <option value='{{major}}' *ngFor="let major of VETERINARY_MAJORS_ARRAY">{{major}}</option>
                            </datalist>
                        </ng-container>
                      </label>
                      <div id="required" *ngIf="submitted && majorForm.errors" class="invalid-feedback">
                          Please enter your major
                      </div>
                    </span>
                    <span id="minorField">
                    <label> Minor
                        <input type="text" name="major" placeholder="Minor" [formControl]="minorForm" [(ngModel)]="credentials.minor" class="form-control" required>
                    </label>
                    </span>  
                </div>
                </div>
                <div class="modal-footer">
                <button type="submit" *ngIf="!successfulRegistration" (click)="register()" class="btn btn-primary">Register</button>
                <button class="btn btn-primary" *ngIf="successfulRegistration" (click)="clearRegisterFields()" data-dismiss="modal" data-toggle="modal" href=#confirmModal>Continue</button>
                <div id="invalidText" *ngIf="invalidEmail == true">
                    <p>A user with that email already exists</p>
                </div>
                </div>
        </div>
      </form>
    </div>
</div>

<!-- Confirm Modal -->
<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModal" aria-hidden="true" data-backdrop="false">
  <div class="modal-dialog" role="document">
    <form (submit)="confirm()">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Confirm email</h5>
          <button type="button" class="close" (click)="clearConfirmFields()" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div *ngIf="unconfirmedEmail">
            <p>Confirmation code was resent. Please enter the code to confirm your account</p>
          </div>      
          <div class="form-group">
            <input type="text" style="width: 40%" class="form-control" name="code" placeholder="Enter confirmation PIN here"
              [(ngModel)]="confirmCredentials.code">
          </div>
          <div class="modal-footer">
            <div id="invalidText" *ngIf="invalidCode == true">
              <p>Invalid code</p>
            </div>
            <div id="validCode" *ngIf="validCode">
              <p>Account Verified!</p>
            </div>
            <!-- <button *ngIf="!validCode" type="submit" class="btn btn-primary">Confirm</button> -->
            <button *ngIf="!validCode" type="submit" class="btn btn-primary">Confirm</button>
            <button *ngIf="validCode" class="btn btn-primary" (click)="finishConfirmation()" data-dismiss="modal" data-toggle="modal">Finish</button>
          </div> 
        </div>
      </div>
    </form>
  </div>
</div>